# ============================================================================
# Netlify Configuration for Wedding App (Next.js)
# ============================================================================

[build]
  # Build command for Next.js
  command = "npm run build"
  
  # Publish directory for Next.js output
  publish = ".next"

[build.environment]
  # Increase Node.js memory for build
  NODE_OPTIONS = "--dns-result-order=ipv4first"
  NODE_MEMORY_AVAILABLE = "2048"

# ============================================================================
# PLUGINS
# ============================================================================

# Cache Next.js builds for faster subsequent deployments
[[plugins]]
  package = "netlify-plugin-cache-nextjs"

# Official Netlify Next.js plugin - handles SSR, API routes, etc.
[[plugins]]
  package = "@netlify/plugin-nextjs"

# ============================================================================
# SERVERLESS FUNCTIONS CONFIGURATION
# ============================================================================

[functions]
  node_bundler = "esbuild"
  included_files = ["src/**"]

# ============================================================================
# NOTES
# ============================================================================
# 1. Set environment variables in Netlify UI: Site settings â†’ Environment
# 2. Build time: Usually 1-3 minutes
# 3. If build fails, try: Clear cache and redeploy in Netlify UI
# ============================================================================
